# Example configuration with model persistence using init container
# Downloads selected models to a PVC before app starts

# Enable model persistence
models:
  enabled: true

  # Download only essential models (saves space and time)
  download:
    - layout
    - tableformer
    - code_formula
    - picture_classifier

  # PVC configuration for model storage
  pvc:
    size: 15Gi
    storageClass: ""  # Use cluster default storage class

  # Init container resources
  initContainer:
    resources:
      requests:
        cpu: 500m
        memory: 1Gi
      limits:
        cpu: 2
        memory: 4Gi

# Extended startup probe for model loading from PVC
# Note: Init container downloads first, then app loads models into memory
startupProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 15
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 30  # 15s + (30 Ã— 10s) = 315s total window

# Production resource allocation for main container
resources:
  requests:
    cpu: 500m
    memory: 2Gi
  limits:
    cpu: 2
    memory: 4Gi
