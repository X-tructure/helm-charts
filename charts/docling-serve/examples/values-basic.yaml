# Basic configuration example for Docling-Serve Helm Chart
# Minimal settings for quick testing and development

# Reduce resources for testing environments
resources:
  requests:
    cpu: 100m
    memory: 512Mi
  limits:
    cpu: 500m
    memory: 2Gi

# Disable model loading at boot for faster startup
# Models will be loaded on first conversion request
env:
  loadModelsAtBoot: "false"

# Optimized probes for fast startup without model loading
# Since models aren't loaded at boot, startup is much faster (~30s)
# These settings prevent false failures with constrained resources
startupProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 15    # Allow time for app init with limited CPU
  periodSeconds: 5           # Check frequently for faster feedback
  timeoutSeconds: 3          # Fast response expected without models
  failureThreshold: 10       # 15s + (10 Ã— 5s) = 65s total window

readinessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 2
  failureThreshold: 3

livenessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 20
  periodSeconds: 10
  timeoutSeconds: 3
  failureThreshold: 3

# Use memory-backed scratch for faster I/O
scratch:
  emptyDir:
    medium: "Memory"
    sizeLimit: 2Gi
